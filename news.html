<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAILY NEWS | ÂâçÊ≤øËßÇÂØü</title>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <!-- Vanilla Tilt -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Oswald:wght@400;700&family=Noto+Sans+SC:wght@300;400;700&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'va-base': '#E8EAE6',
                        'va-card': '#F4F6F2',
                        'va-dark': '#2C3E50',
                        'va-accent': '#607D8B',
                        'va-gold': '#D4AC0D',
                    },
                    fontFamily: {
                        display: ['Oswald', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                        body: ['Noto Sans SC', 'sans-serif'],
                    },
                    animation: {
                        'grid-flow': 'gridMove 20s linear infinite',
                    },
                    keyframes: {
                        gridMove: {
                            '0%': { backgroundPosition: '0 0' },
                            '100%': { backgroundPosition: '40px 40px' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #E8EAE6;
            color: #2C3E50;
            font-family: 'Noto Sans SC', sans-serif;
            overflow-x: hidden;
        }

        /* Dynamic Background */
        .cyber-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(44, 62, 80, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(44, 62, 80, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -1;
        }

        .cyber-grid::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 50% 50%, transparent 20%, #E8EAE6 100%);
            pointer-events: none;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #E8EAE6;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const { motion, AnimatePresence } = window.Motion;

        // --- Components ---

        const TiltCard = ({ children, options, isMobile }) => {
            const tiltRef = useRef(null);

            useEffect(() => {
                if (!isMobile && tiltRef.current) {
                    VanillaTilt.init(tiltRef.current, options);
                }
                return () => tiltRef.current && tiltRef.current.vanillaTilt && tiltRef.current.vanillaTilt.destroy();
            }, [options, isMobile]);

            return <div ref={tiltRef} className="h-full">{children}</div>;
        };

        const Header = ({ isDarkMode, toggleTheme }) => {
            return (
                <header className="max-w-7xl mx-auto mt-6 mb-8 px-4 md:mt-12 md:mb-12 md:px-5 flex justify-between items-center">
                    <div className="flex flex-col">
                        <h1 className="font-display text-4xl md:text-5xl text-va-dark dark:text-white">
                            DAILY <span className="text-va-gold">NEWS</span>
                        </h1>
                        <p className="font-mono text-xs text-va-accent dark:text-slate-400 tracking-[0.3em] uppercase">
                            AUTOMOTIVE & TECH FRONTIER
                        </p>
                    </div>
                    <div className="flex gap-4">
                        <a href="index.html" className="px-6 py-2 border border-va-dark dark:border-white text-va-dark dark:text-white rounded-full font-mono text-xs hover:bg-va-dark hover:text-white dark:hover:bg-white dark:hover:text-slate-900 transition-colors">
                            BACK TO VA
                        </a>
                        <button 
                            onClick={toggleTheme}
                            className="p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors"
                        >
                            {isDarkMode ? 'üåû' : 'üåô'}
                        </button>
                    </div>
                </header>
            );
        };

        const NewsModal = ({ isOpen, onClose, item }) => {
            if (!isOpen || !item) return null;

            return (
                <motion.div 
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    className="fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-8 bg-black/90 backdrop-blur-xl"
                    onClick={onClose}
                >
                    <motion.div 
                        initial={{ scale: 0.9, y: 20 }}
                        animate={{ scale: 1, y: 0 }}
                        className="bg-va-card dark:bg-slate-900 w-full max-w-6xl max-h-[90vh] rounded-[2.5rem] overflow-hidden flex flex-col md:flex-row shadow-2xl border border-va-dark/10 dark:border-white/10"
                        onClick={(e) => e.stopPropagation()}
                    >
                        {/* Image Side */}
                        <div className="md:w-1/2 h-64 md:h-auto relative bg-black">
                            <img 
                                src={item.poster} 
                                alt={item.date} 
                                className="w-full h-full object-contain"
                            />
                        </div>

                        {/* Content Side */}
                        <div className="md:w-1/2 p-8 md:p-12 overflow-y-auto custom-scrollbar bg-white dark:bg-slate-800">
                            <div className="flex justify-between items-start mb-8">
                                <div>
                                    <div className="text-va-gold font-mono text-sm mb-2 tracking-widest">{item.date}</div>
                                    <h2 className="font-display text-3xl text-va-dark dark:text-white">Êñ∞ÈóªÂä®ÊÄÅ</h2>
                                </div>
                                <button onClick={onClose} className="p-2 hover:bg-black/5 dark:hover:bg-white/10 rounded-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-va-dark dark:text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>

                            <div className="space-y-4">
                                {item.items.map((news, idx) => (
                                    <a 
                                        key={idx}
                                        href={news.link}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        className="block p-4 rounded-2xl bg-va-base dark:bg-slate-700/50 hover:bg-va-gold/10 hover:border-va-gold/30 border border-transparent transition-all group"
                                    >
                                        <div className="flex items-start gap-4">
                                            <span className="font-mono text-va-gold font-bold text-lg opacity-50 group-hover:opacity-100">{(idx + 1).toString().padStart(2, '0')}</span>
                                            <div>
                                                <h3 className="font-bold text-va-dark dark:text-white text-lg mb-1 leading-snug group-hover:text-va-gold transition-colors">{news.title}</h3>
                                                <p className="text-xs font-mono text-va-accent dark:text-slate-400">{news.source} ‚Üó</p>
                                            </div>
                                        </div>
                                    </a>
                                ))}
                            </div>
                        </div>
                    </motion.div>
                </motion.div>
            );
        };

        const NewsCard = ({ item, onClick, isMobile }) => {
            return (
                <motion.div
                    layout
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    className="cursor-pointer"
                    onClick={() => onClick(item)}
                >
                    <TiltCard isMobile={isMobile} options={{ max: 5, speed: 400, scale: 1.02 }}>
                        <div className="bg-white dark:bg-slate-800 rounded-[2rem] overflow-hidden border border-va-dark/5 dark:border-white/5 shadow-lg hover:shadow-2xl transition-all group relative">
                            <div className="aspect-[9/16] relative overflow-hidden">
                                <img 
                                    src={item.poster} 
                                    alt={item.date} 
                                    className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                                />
                                <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60 group-hover:opacity-40 transition-opacity"></div>
                                <div className="absolute bottom-6 left-6 text-white">
                                    <div className="font-mono text-xs text-va-gold mb-1">{item.date}</div>
                                    <div className="font-display text-2xl uppercase tracking-wider">Daily Briefing</div>
                                </div>
                            </div>
                        </div>
                    </TiltCard>
                </motion.div>
            );
        };

        const App = () => {
            const [data, setData] = useState([]);
            const [loading, setLoading] = useState(true);
            const [selectedItem, setSelectedItem] = useState(null);
            const [isMobile, setIsMobile] = useState(false);
            const [isDarkMode, setIsDarkMode] = useState(false);

            useEffect(() => {
                const checkMobile = () => setIsMobile(window.innerWidth < 768);
                checkMobile();
                window.addEventListener('resize', checkMobile);

                fetch('./news_data.json')
                    .then(res => res.json())
                    .then(setData)
                    .catch(err => console.error(err))
                    .finally(() => setLoading(false));

                return () => window.removeEventListener('resize', checkMobile);
            }, []);

            return (
                <div className={`${isDarkMode ? 'dark' : ''}`}>
                    <div className="min-h-screen bg-[#E8EAE6] dark:bg-[#0f172a] transition-colors duration-500">
                        <div className="cyber-grid opacity-10"></div>
                        
                        <Header isDarkMode={isDarkMode} toggleTheme={() => setIsDarkMode(!isDarkMode)} />

                        <main className="max-w-7xl mx-auto px-4 md:px-5 pb-20">
                            {loading ? (
                                <div className="text-center font-mono text-va-accent animate-pulse mt-20">LOADING NEWS FEED...</div>
                            ) : (
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                                    {data.map((item) => (
                                        <NewsCard 
                                            key={item.id} 
                                            item={item} 
                                            isMobile={isMobile}
                                            onClick={setSelectedItem}
                                        />
                                    ))}
                                </div>
                            )}
                        </main>

                        <AnimatePresence>
                            {selectedItem && (
                                <NewsModal 
                                    isOpen={!!selectedItem} 
                                    onClose={() => setSelectedItem(null)} 
                                    item={selectedItem} 
                                />
                            )}
                        </AnimatePresence>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
